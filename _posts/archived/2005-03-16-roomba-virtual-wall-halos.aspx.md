---
layout: post
title: "Roomba Virtual Wall Halos"
date: 2005-03-16 -0800
comments: true
disqus_identifier: 765
tags: [General Ramblings]
---
I went home and, after giving Roomba a thorough cleaning, did some
testing.

 [So it was acting up around the virtual wall
units.](/archive/2005/03/15/roomba-acting-up.aspx) I had some placed
around the bedroom so the Roomba wouldn't go under the bed and destroy
the crap we have down there, but what ended up happening was that Roomba
would spin in circles and clean the same four square feet over and over.
I couldn't for the life of me figure out what was up.

 After reading [some of the FAQs on the iRobot
site](http://www.irobot.com/support/), I started gathering that the
virtual walls not only put out a beam forward (as the virtual wall) but
also a beam around the wall unit itself, presumably so the Roomba
doesn't run into the unit and knock it over or change its position.

 On the bottom of the virtual wall unit is a diagram that sort of
illustrates this:

 ![Original virtual wall
diagram]({{ site.url }}/images/20050316vwall1.gif)

 You can see in the diagram a small dotted halo surrounding the virtual
wall unit as it projects the beam. I had interpreted this halo as a
circle to highlight the virtual wall unit. Not the case - it actually
outlines the wall unit's beam pattern.

 As it turns out, this diagram is correct, just not to any sort of
scale. The correct diagram would look more like this:

 ![More accurate virtual wall
diagram]({{ site.url }}/images/20050316vwall2.gif)

 Notice the halo extends to the far reaches of space. This is more
accurate. In fact, if I cover the little broadcast point on the top of
the virtual wall unit (to stop the halo), Roomba behaves as normal
again.

 That's why you see the virtual wall in the diagram parked behind a
physical wall and broadcasting outward - so Roomba doesn't pick up on
the protective halo of the virtual wall unit.

 Why was I afflicted? I had changed the way the virtual walls in the
room were laid out from previous times Roomba had run. Before I had
blocked the virtual walls with a pillow so Roomba wouldn't hit them,
which, at the same time, meant I unknowingly had blocked the virtual
wall's protective halo so I never saw the behavior. This time I had not
blocked the virtual walls with a pillow, and Roomba went nuts. Too much
infrared in a small space.

 So I'm back to status quo on that front. Virtual wall placement now
becomes a more strategic task, but I should be okay.
